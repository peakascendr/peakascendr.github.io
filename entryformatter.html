<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Motor & Data Entry Formatter</title>
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.23/css/jquery.dataTables.min.css">
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.6.0/css/bootstrap.min.css">
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script type="text/javascript" src="https://cdn.datatables.net/1.10.23/js/jquery.dataTables.min.js"></script>
  <script type="text/javascript" src="https://cdn.datatables.net/1.10.23/js/dataTables.bootstrap4.min.js"></script>
</head>
<body>
	<div class="jumbotron text-center" style="margin-bottom:0">
  <h1>FPV Motor and Prop Data</h1>
  <p>Format data for submission </p> 
</div>
<div class="form-group">
  <form id="data" onsubmit="return make_json(this); return false;" method="post">
	Make: <input type="text" name="make"/><br>
	Model: <input type="text" name="model"/><br>
	Class (whoop,freestyle,racing, etc):  <input type="text" name="class"/><br>
	Battery Size (1S,4S,6S,etc): <input type="text" name="batt_v"/><br>
	Motor Size (2450,0810,1150,etc): <input type="text" name="motor_sz"/><br>
  	Motor kv (1800,25000,etc): <input type="text" name="motor_kv"/><br>
  	Prop Diameter (2",3",5", etc): <input type="text" name="prop_diam"/><br>
  	Number of Prop Blades (2,3,4,etc): <input type="text" name="prop_blades"/><br>
  	Prop Model (5030,2025,etc)<input type="text" name="prop_model"/><br>
  	Dry Weight (g):<input type="text" name="dry_wgt_g"/><br>
  	Source (http://linktosite.etc): <input type="text" name="source"/><br>

<input type="button" id="button1" value="Format"/>
</form>
</div>
<pre id="output">
</pre>
</body>
<script>    
    document.getElementById("button1").onclick = function(e){
    make_json(document.getElementById("data"));
}

function make_json(form){
    var json={};
    
    var elements = form.elements;
    
    for (var i = 0, element; element = elements[i++];) {
    if (element.type == "text" && element.value != ""){
    		if(!isNaN(element.value)){
        json[element.name] = Number(element.value);
        }
        else{
        	json[element.name] = element.value;
        }
    }
    }
    
    var html = JSON.stringify(json,null,4);
    document.getElementById('output').innerHTML=html;
    return false;
}
  </script>
  </html>
